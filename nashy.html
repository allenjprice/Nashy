<!DOCTYPE html>

<html>
<head>
	<title>Nashy</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<script type="text/javascript">

var keys = {
	c: ['C', 'D', 'E', 'F', 'G', 'A', 'B'],
	cSharp: ['C#', 'D#', 'E#', 'F#', 'G#', 'A#', 'B#'],
	d: ['D', 'E', 'F#', 'G', 'A', 'B', 'C#'],
	dSharp: ['D#', 'E#', 'Fx', 'G#', 'A#', 'Bx', 'C#'],
	eFlat: ['Eb', 'F', 'G', 'Ab', 'Bb', 'C', 'D'],
	e: ['E', 'F#', 'G#', 'A', 'B', 'C#', 'D#'],
	f: ['F', 'G', 'A', 'Bb', 'C', 'D', 'E'],
	fSharp: ['F#', 'G#', 'A#', 'B', 'C#', 'D#', 'E#'],
	gFlat: ['Gb', 'Ab', 'Bb', 'Cb', 'Db', 'Eb', 'F'],
	g: ['G', 'A', 'B', 'C', 'D', 'E', 'F#'],
	gSharp: ['G#', 'A#', 'Bx', 'C#', 'D#', 'E#', 'Fx'],
	aFlat: ['Ab', 'Bb', 'C', 'Db', 'Eb', 'F'],
	a: ['A', 'B', 'C#', 'D', 'E', 'F#', 'G#'],
	aSharp: ['A#', 'B#', 'Cx', 'D#', 'E#', 'F#', 'Gx'],
	bFlat: ['Bb', 'C', 'D', 'Eb', 'F', 'G', 'A'],
	b: ['B', 'C#', 'D#', 'E', 'F#', 'G#', 'A#'],
	numbers: ['1', '2', '3', '4', '5', '6', '7']
}

function processText(text, originalKey, destinationKey){
	
	var result = '';

	for (var i=0; i<text.length; i++){
		var character = text[i];
		
		if (text[i] === keys[originalKey][0] || text[i] === keys[originalKey][1] || text[i] === keys[originalKey][2] || text[i] === keys[originalKey][3] || text[i] === keys[originalKey][4] || text[i] === keys[originalKey][5] || text[i] === keys[originalKey][6] || text[i] === keys[originalKey][7] ){
				switch (text[i]){
					case keys[originalKey][0]:
						result += keys[destinationKey][0];
						break;
					case keys[originalKey][1]:
						result += keys[destinationKey][1];
						break;
					case keys[originalKey][2]:
						result += keys[destinationKey][2];
						break;
					case keys[originalKey][3]:
						result += keys[destinationKey][3];
						break;
					case keys[originalKey][4]:
						result += keys[destinationKey][4];
						break;							
					case keys[originalKey][5]:
						result += keys[destinationKey][5];
						break;
					case keys[originalKey][6]:
						result += keys[destinationKey][6];
						break;
					case keys[originalKey][7]:
						result += keys[destinationKey][7];
						break;	
					}
				}
				else
					result += text[i];
		// if (text[i] === keys[originalKey][0] || text[i] === keys[originalKey][1] || text[i] === keys[originalKey][2] || text[i] === keys[originalKey][3] || text[i] === keys[originalKey][4] || text[i] === keys[originalKey][5] || text[i] === keys[originalKey][6] || text[i] === keys[originalKey][7] ){ 
		// 	console.log(keys[originalKey][0]);
		// 	result += keys[destinationKey][(text[i]-1)];
		// }
		// else
		// 	result += text[i];
	}
	
	return result;
}

$(document).ready(function(){

	$('.processText').click(function(){

		$('div.destination').text(processText($('.source').text(), $('#originalKey').val(), $('#destinationKey').val()));
	});

});

</script>

<body>

<!--stuff and things-->

<h1>Nashy</h1>
<h5>An app for lazy and/or brilliant musicians</h5>

<div class = "key-select">
	<label for="originalKey">Original Key:</label>
	<select name="originalKey" id="originalKey">
		<option value='numbers'>Numbers</option>
		<option value='c' selected='selected'>C</option>
		<option value='cSharp'>C#/Db</option>
		<option value='d'>D</option>
		<option value='eFlat'>D#/Eb</option>
		<option value='e'>E</option>
		<option value='f'>F</option>
		<option value='fSharp'>F#/Gb</option>
		<option value='g'>G</option>
		<option value='aFlat'>G#/Ab</option>
		<option value='a'>A</option>
		<option value='bFlat'>A#/Bb</option>
		<option value='b'>B</option>
	</select>
	<label for="destinationKey">Destination Key:</label>
	<select name="destinationKey" id="destinationKey">
		<option value='numbers'>Numbers</option>
		<option value='c'>C</option>
		<option value='cSharp'>C#/Db</option>
		<option value='d' selected='selected'>D</option>
		<option value='eFlat'>D#/Eb</option>
		<option value='e'>E</option>
		<option value='f'>F</option>
		<option value='fSharp'>F#/Gb</option>
		<option value='g'>G</option>
		<option value='aFlat'>G#/Ab</option>
		<option value='a'>A</option>
		<option value='bFlat'>A#/Bb</option>
		<option value='b'>B</option>
	</select>


<label for="processText">Transpose:
<button class="processText">Change it up!</button>
</div>
<div class="sourceContainer"><div class="source" contenteditable="true">C D E F G A B</div>
</div>

<div class="destination" style="border:1px solid black">And it shows up processed here</div>
</body>